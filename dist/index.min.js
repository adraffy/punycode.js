function e(e){return e<26?97+e:22+e}function r(e){if(e>=48&&e<=57)return e-22;if(e>=97&&e<=122)return e-97;if(e>=65&&e<=90)return e-65;throw new Error(`expected basic character: ${e}`)}function t(e,r){let t=e-r;return t<=0?1:t>=26?26:t}function o(e,r,t){e=Math.floor(e/(t?700:2)),e+=Math.floor(e/r);let o=0;for(;e>455;)e=Math.floor(e/35),o+=36;return o+Math.floor(36*e/(e+38))}function n(r){if(!Array.isArray(r)||!r.every((e=>Number.isSafeInteger(e)&&e>=0&&e<=1114111)))throw new TypeError("expected array of Unicode codepoints");let n=r.filter((e=>e<128)),f=n.length;if(f==r.length)return r;f&&n.push(45);let i=128,l=72,a=0,h=f;for(;h<r.length;){let u=r.reduce(((e,r)=>r>=i&&r<e?r:e),1114111);a+=(u-i)*(h+1);for(let i of r)if(i<u)a++;else if(i==u){let r=a;for(let o=36;;o+=36){let f=t(o,l),i=r-f;if(i<0)break;let a=36-f;n.push(e(f+i%a)),r=Math.floor(i/a)}n.push(e(r)),l=o(a,h+1,h==f),a=0,h++}a++,i=u+1}return n}function f(e){if(!Array.isArray(e)||!e.every((e=>Number.isSafeInteger(e)&&e>=0&&e<=128)))throw new TypeError("expected array of ASCII codepoints");let n=e.lastIndexOf(45)+1,f=e.slice(0,Math.max(0,n-1)),i=0,l=128,a=72;for(;n<e.length;){let h=i;for(let o=1,f=36;;f+=36){if(n>=e.length)throw new Error("invalid encoding");let l=r(e[n++]);i+=l*o;let h=t(f,a);if(l<h)break;o*=36-h}let u=f.length+1;if(a=o(i-h,u,0==h),l+=Math.floor(i/u),l>1114111)throw new Error("invalid encoding");i%=u,f.splice(i++,0,l)}return f}export{f as puny_decode,n as puny_encode};
