function r(r){return r<26?97+r:22+r}function e(r){if(r<=90){if(r>=65)return r-65;if(r>=48&&r<=57)return r-22}else if(r>=97&&r<=122)return r-97;throw new Error(`not alphanumeric ASCII: 0x${r.toString(16)}`)}function t(r,e){let t=r-e;return t<=0?1:t>=26?26:t}function n(r,e,t){r=Math.floor(r/(t?700:2)),r+=Math.floor(r/e);let n=0;for(;r>455;)r=Math.floor(r/35),n+=36;return n+Math.floor(36*r/(r+38))}function i(r){return[...r].map((r=>r.codePointAt(0)))}function o(r){if("string"==typeof r){let e=i(r),t=l(e);return e===t?r:String.fromCharCode(...t)}return String.fromCharCode(...f(r))}function f(r){if("string"==typeof r)return l(i(r));if(Array.isArray(r)&&r.every((r=>Number.isSafeInteger(r)&&r>=0&&r<=1114111))){let e=l(r);return r==e?r.slice():e}throw new Error("expected Unicode")}function l(e){let i=e.filter((r=>r<128)),o=i.length;if(o==e.length)return e;i.splice(0,0,120,110,45,45),o&&i.push(45);let f=128,l=72,u=0,a=o;for(;a<e.length;){let h=e.reduce(((r,e)=>e>=f&&e<r?e:r),1114111);u+=(h-f)*(a+1);for(let f of e)if(f<h)u++;else if(f==h){let e=u;for(let n=36;;n+=36){let o=t(n,l),f=e-o;if(f<0)break;let u=36-o;i.push(r(o+f%u)),e=Math.floor(f/u)}i.push(r(e)),l=n(u,a+1,a==o),u=0,a++}u++,f=h+1}return i}function u(r,o){let f;if("string"==typeof r?f=i(r):ArrayBuffer.isView(r)?f=Array.from(r):Array.isArray(r)&&(f=r.slice()),f&&f.every((r=>Number.isSafeInteger(r)&&r>=0&&r<128))){if(!o){if(!((l=f).length>=4)||120!=l[0]&&88!=l[0]||110!=l[1]&&78!=l[1]||45!=l[2]||45!=l[3])return f;f=f.slice(4)}return function(r){let i=r.lastIndexOf(45)+1,o=Math.max(0,i-1),f=r.slice(0,o),l=0,u=128,a=72;for(;i<r.length;){let o=l,h=1,c=36;for(;;){let n=e(r[i++]);l+=n*h;let o=t(c,a);if(n<o)break;if(i>=r.length)throw new Error("invalid encoding");h*=36-o,c+=36}let s=f.length+1;if(a=n(l-o,s,0==o),u+=Math.floor(l/s),u>1114111)throw new Error("invalid encoding");l%=s,f.splice(l++,0,u)}return f}(f)}var l;throw new TypeError("expected ASCII")}export{u as puny_decoded,o as puny_encoded,f as puny_encoded_bytes};
