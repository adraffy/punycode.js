function r(r){return r<26?97+r:22+r}function e(r){if(r>=48&&r<=57)return r-22;if(r>=97&&r<=122)return r-97;if(r>=65&&r<=90)return r-65;throw new Error(`not alphanumeric ASCII: 0x${r.toString(16)}`)}function t(r,e){let t=r-e;return t<=0?1:t>=26?26:t}function n(r,e,t){r=Math.floor(r/(t?700:2)),r+=Math.floor(r/e);let n=0;for(;r>455;)r=Math.floor(r/35),n+=36;return n+Math.floor(36*r/(r+38))}function o(e){if(!Array.isArray(e)||!e.every((r=>Number.isSafeInteger(r)&&r>=0&&r<=1114111)))throw new TypeError("expected array of Unicode codepoints");let o=e.filter((r=>r<128)),f=o.length;if(f==e.length)return e;f&&o.push(45);let i=128,l=72,a=0,h=f;for(;h<e.length;){let u=e.reduce(((r,e)=>e>=i&&e<r?e:r),1114111);a+=(u-i)*(h+1);for(let i of e)if(i<u)a++;else if(i==u){let e=a;for(let n=36;;n+=36){let f=t(n,l),i=e-f;if(i<0)break;let a=36-f;o.push(r(f+i%a)),e=Math.floor(i/a)}o.push(r(e)),l=n(a,h+1,h==f),a=0,h++}a++,i=u+1}return o}function f(r){if(!Array.isArray(r)||!r.every((r=>Number.isSafeInteger(r)&&r>=0&&r<=128)))throw new TypeError("expected array of ASCII codepoints");let o=r.lastIndexOf(45)+1,f=r.slice(0,Math.max(0,o-1)),i=0,l=128,a=72;for(;o<r.length;){let h=i;for(let n=1,f=36;;f+=36){if(o>=r.length)throw new Error("invalid encoding");let l=e(r[o++]);i+=l*n;let h=t(f,a);if(l<h)break;n*=36-h}let u=f.length+1;if(a=n(i-h,u,0==h),l+=Math.floor(i/u),l>1114111)throw new Error("invalid encoding");i%=u,f.splice(i++,0,l)}return f}export{f as puny_decode,o as puny_encode};
