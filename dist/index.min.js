function r(r){return r<26?97+r:22+r}function e(r){if(r<=90){if(r>=65)return r-65;if(r>=48&&r<=57)return r-22}else if(r>=97&&r<=122)return r-97;throw new Error(`not alphanumeric ASCII: 0x${r.toString(16)}`)}function t(r,e){let t=r-e;return t<=0?1:t>=26?26:t}function n(r,e,t){r=Math.floor(r/(t?700:2)),r+=Math.floor(r/e);let n=0;for(;r>455;)r=Math.floor(r/35),n+=36;return n+Math.floor(36*r/(r+38))}function o(r){return[...r].map((r=>r.codePointAt(0)))}function i(r){if("string"==typeof r){let e=o(r),t=l(e,!0);return e===t?r:String.fromCharCode(...t)}return String.fromCharCode(...f(r,!0))}function f(r,e){if(!Array.isArray(r)||!r.every((r=>Number.isSafeInteger(r)&&r>=0&&r<=1114111)))throw new TypeError("expected array of Unicode codepoints");return l(r,e)}function l(e,o){let i=e.filter((r=>r<128)),f=i.length;if(f==e.length)return e;o&&i.splice(0,0,120,110,45,45),f&&i.push(45);let l=128,u=72,a=0,s=f;for(;s<e.length;){let o=e.reduce(((r,e)=>e>=l&&e<r?e:r),1114111);a+=(o-l)*(s+1);for(let l of e)if(l<o)a++;else if(l==o){let e=a;for(let n=36;;n+=36){let o=t(n,u),f=e-o;if(f<0)break;let l=36-o;i.push(r(o+f%l)),e=Math.floor(f/l)}i.push(r(e)),u=n(a,s+1,s==f),a=0,s++}a++,l=o+1}return i}function u(r){return r.length>=4&&(120==r[0]||88==r[0])&&(110==r[1]||78==r[1])&&45==r[2]&&45==r[3]}function a(r){if("string"==typeof r){let e=o(r);if(e.every((r=>r<128)))return u(e)?String.fromCodePoint(...c(e.slice(4))):r}else if(ArrayBuffer.isView(r)){if(r.every((r=>r>=0&&r<128)))return u(r)?String.fromCodePoint(...c(r.subarray(4))):String.fromCharCode(...r)}else if(Array.isArray(r)&&r.every((r=>Number.isSafeInteger(r)&&r>=0&&r<=128)))return u(r)?String.fromCodePoint(...c(r.slice(4))):String.fromCharCode(...r);throw new TypeError("expected ASCII")}function s(r){if(ArrayBuffer.isView(r)){if(r.every((r=>r>=0&&r<128)))return c(r)}else if(Array.isArray(r)&&r.every((r=>Number.isSafeInteger(r)&&r>=0&&r<=128)))return c(r);throw new TypeError("expected array of ASCII codepoints")}function c(r){let o=r.lastIndexOf(45)+1,i=Math.max(0,o-1),f=ArrayBuffer.isView(r)?[...r.subarray(0,i)]:r.slice(0,i),l=0,u=128,a=72;for(;o<r.length;){let i=l,s=1,c=36;for(;;){let n=e(r[o++]);l+=n*s;let i=t(c,a);if(n<i)break;if(o>=r.length)throw new Error("invalid encoding");s*=36-i,c+=36}let h=f.length+1;if(a=n(l-i,h,0==i),u+=Math.floor(l/h),u>1114111)throw new Error("invalid encoding");l%=h,f.splice(l++,0,u)}return f}export{s as puny_decode,a as puny_decoded,f as puny_encode,i as puny_encoded};
